FROM oven/bun:1 AS build

WORKDIR /app

# Instalar dependencias
COPY package.json bun.lockb ./
RUN bun install

# Copiar c贸digo fuente
COPY . .

# Construir aplicaci贸n
RUN bun run build

# Segunda etapa: imagen de producci贸n
FROM nginx:alpine

# Copiar archivos de configuraci贸n para nginx
COPY --from=build /app/dist /usr/share/nginx/html
COPY --from=build /app/nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 3000

CMD ["nginx", "-g", "daemon off;"]